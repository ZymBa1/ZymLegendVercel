<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>ZymLegend - Fix Update 1.1</title>
  <link rel="stylesheet" href="style.css">

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <div id="preloader">
    <div class="loader"></div>
    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</p>
  </div>

  <header>
    <h1 id="gameTitle">ZymLegend</h1>
    <div id="topBar">
      <span id="accountStatus">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–æ–≤</span>
      <select id="langSelect" onchange="changeLanguage(this.value)">
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        <option value="en">English</option>
        <option value="tg">–¢–∞–¥–∂–∏–∫</option>
      </select>
    </div>
  </header>

  <main>
    <section id="menu" class="screen active">
      <div class="menuButtons">
        <button onclick="startSingle()">üéÆ –ò–≥—Ä–∞—Ç—å –û–¥–∏–Ω–æ—á–Ω—ã–π</button>
        <button onclick="openAccounts()">üë§ –ê–∫–∫–∞—É–Ω—Ç—ã</button>
        <button onclick="openSettings()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        <button onclick="openClans()">‚öîÔ∏è –ö–ª–∞–Ω—ã</button>
      </div>
    </section>

    <!-- –ò–≥—Ä–∞ -->
    <section id="game" class="screen">
      <button id="homeBtn" onclick="goHome()" class="homeBtn">üè† –î–æ–º–æ–π</button>
      <canvas id="gameCanvas" width="800" height="500"></canvas>
      <div id="hud">
        <div id="status">HP: 100 | –í—Ä–∞–≥–æ–≤: 0</div>
        <div id="xpStatus">XP: 0 | Level: 1</div>
        <div id="baseStatus">–ë–∞–∑—ã –∑–∞—Ö–≤–∞—á–µ–Ω—ã: 0</div>
      </div>

      <div id="joystickMove" class="joystick"><div class="stick"></div></div>
      <div id="joystickShoot" class="joystick"><div class="stick"></div></div>
    </section>

    <!-- –ê–∫–∫–∞—É–Ω—Ç—ã -->
    <section id="accounts" class="screen">
      <button class="backBtn" onclick="openMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
      <h2>–ê–∫–∫–∞—É–Ω—Ç—ã</h2>
      <div class="accountsBlock">
        <button onclick="connectTelegram()">üì≤ Telegram WebApp</button>
        <button onclick="openZLAuth()">üõ° ZLAccount</button>
        <button onclick="facebookLogin()">üìò Facebook</button>
      </div>

      <h3>–í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google</h3>
      <div id="g_id_onload"
           data-client_id="–í–ê–®_GOOGLE_CLIENT_ID"
           data-callback="handleGoogleResponse">
      </div>
      <div class="g_id_signin"
           data-type="standard"
           data-size="large"
           data-theme="outline"
           data-text="signin_with"
           data-shape="rect"
           data-logo_alignment="left">
      </div>
      <div style="margin-top:12px;">
        <button onclick="logoutAll()">–í—ã–π—Ç–∏ –∏–∑ –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤</button>
      </div>
    </section>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <section id="settings" class="screen">
      <button class="backBtn" onclick="closeSettings()">‚¨Ö –ù–∞–∑–∞–¥</button>
      <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
      <div class="settingSection">
        <h3>–°–ª–æ–∂–Ω–æ—Å—Ç—å</h3>
        <select id="difficultySelect">
          <option value="easy">–õ—ë–≥–∫–∞—è</option>
          <option value="normal" selected>–ù–æ—Ä–º–∞–ª—å–Ω–∞—è</option>
          <option value="hard">–°–ª–æ–∂–Ω–∞—è</option>
        </select>
      </div>
      <div class="settingSection">
        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–ü–ö)</h3>
        <div id="keyMapList"></div>
      </div>
      <div class="settingSection">
        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–¢–µ–ª–µ—Ñ–æ–Ω)</h3>
        <label><input type="checkbox" id="enableShootJoystick"> –í–∫–ª—é—á–∏—Ç—å –¥–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è —Å—Ç—Ä–µ–ª—å–±—ã</label><br/>
        <label><input type="checkbox" id="movableJoysticks"> –ü–µ—Ä–µ–º–µ—â–∞–µ–º—ã–µ –¥–∂–æ–π—Å—Ç–∏–∫–∏</label>
      </div>
      <button onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </section>

    <!-- –ö–ª–∞–Ω—ã -->
    <section id="clans" class="screen">
      <button class="backBtn" onclick="openMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
      <h2>–ö–ª–∞–Ω—ã</h2>
      <input id="clanName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞–Ω–∞">
      <button onclick="createClan()">–°–æ–∑–¥–∞—Ç—å –∫–ª–∞–Ω</button>
      <div id="clanList"></div>
    </section>

  </main>

  <footer>
    <small>ZymLegend - –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ ZymBa1</small>
  </footer>

  <script src="game.js"></script>
</body>
</html>
